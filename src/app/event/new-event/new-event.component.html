<form (ngsubmit)="save()" [formGroup]="eventForm">
  <fieldset>
    <div [ngClass]="{'has-error': (eventForm.get('kaleProfileName').touched || eventForm.get('kaleProfileName').dirty)}">
      <label for="kaleProfileNameId">Host name</label>
      <input for="kaleProfileNameId" type="text" placeholder="Host name" formControlName="kaleProfileName">
      <span *ngIf="eventForm.get('kaleProfileName').touched || eventForm.get('kaleProfileName').dirty && eventForm.get('kaleProfileName').errors">
        <span *ngIf="eventForm.get('kaleProfileName').errors">
          Please enter a valid host name
        </span>

      </span>
    </div>
    <div>
      <label>dato</label>
      <input type="date" formControlName="eventDate">
    </div>
    <div>
      <label>navn for event</label>
      <input type="text" formControlName="name">
    </div>


    <h2>BAJER</h2>
    <button (click)="addBeer()">Tilføj bajer</button>

    <div formArrayName="kaleBeers">
      <div *ngFor="let kaleBeer of eventForm.get('kaleBeers')['controls'] ; let i=index">
        <div>
          <span>Beer {{i+1}}</span>
          <button *ngIf="eventForm.get('kaleBeers')['controls'].length>1" (click)="removeBeer(i)">Fjern bajer</button>
        </div>

        <div [formGroupName]="i">
          <div>
            <label>name</label>
            <input type="text" formControlName="name">
            <span *ngIf="(eventForm.get('kaleBeers')['controls'][i].controls.name.touched || eventForm.get('kaleBeers')['controls'][i].controls.name.dirty) && eventForm.get('kaleBeers')['controls'][i].controls.name.errors">
              <span *ngIf="eventForm.get('kaleBeers')['controls'][i].controls.name.errors.required ">
                Hey mand. Husk lige at skrive et navn for din bajer
              </span>
            <span *ngIf="eventForm.get('kaleBeers')['controls'][i].controls.name.errors.minlength ">
                Hey mand. Husk lige at navnet for din bajer skal være minst tre tegn mkay
              </span>
            </span>
            <!-- Vis validation her -->
          </div>
          <div>
            <label>description</label>
            <input type="text" formControlName="description">
          </div>
          <div>
            <label>vol procent</label>
            <input type="number" formControlName="volPercentage">
          </div>
          <br>
        </div>
      </div>

    </div>

    <h2>OPSKRIFTER</h2>
    <button (click)="addRecipe()">Tilføj opskrift</button>
    <div formArrayName="kaleRecipes">
      <div *ngFor="let kaleRecipe of eventForm.get('kaleRecipes')['controls'] ; let i=index">
        <div>
          <span>Recipe {{i+1}}</span>
          <button *ngIf="eventForm.get('kaleRecipes')['controls'].length>1" (click)="removeRecipe(i)">Fjern opskrift</button>
        </div>

        <div [formGroupName]="i">
          <div>
            <label>name</label>
            <input type="text" formControlName="name">
            <!-- Vis validation her -->
          </div>
          <div>
            <label>coursOfAction</label>
            <input type="text" formControlName="coursOfAction">
          </div>
          <br>
        </div>
      </div>
    </div>

  </fieldset>
</form>

<div>
  <button type="submit" [disabled]="!eventForm.valid">
    Save new event
  </button>
</div>
<br>Dirty: {{eventForm.dirty}}
<br>Touched: {{eventForm.touched}}
<br>Valid: {{eventForm.valid}}
<br>Value: {{eventForm.value | json }}